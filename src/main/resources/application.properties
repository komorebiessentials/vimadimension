# src/main/resources/application.properties
# Set the root log level (e.g., to INFO or DEBUG for more verbosity)
logging.level.root=INFO

# Set the log level specifically for your UserDetailsServiceImpl package/class
# This is useful for getting detailed logs from just this class
logging.level.org.example.service.UserDetailsServiceImpl=DEBUG
# Or, if your UserDetailsServiceImpl is in org.example.security:
# logging.level.org.example.security.UserDetailsServiceImpl=DEBUG

# You can also set the level for Spring Security to see its internal logging
logging.level.org.springframework.security=DEBUG

# ===============================
# DATASOURCE
# ===============================
# Database URL for local MySQL
spring.datasource.url=jdbc:mysql://localhost:3306/project_tracker_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&zeroDateTimeBehavior=CONVERT_TO_NULL

# Database Username (update with your local MySQL username)
spring.datasource.username=tracker_app_user

# Database Password (update with your local MySQL password)
spring.datasource.password=your_strong_password

# JDBC Driver (Spring Boot usually auto-detects this for MySQL, but it's good to be explicit)
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ===============================
# JPA / HIBERNATE
# ===============================
# Show SQL queries in the console (useful for debugging)
spring.jpa.show-sql=true

# Format SQL queries in the console
spring.jpa.properties.hibernate.format_sql=true

# Hibernate DDL auto-generation strategy.
# Common values:
#   validate: Validates the schema, makes no changes to the database.
#   update: Updates the schema if necessary. Good for development, but use with caution in production.
#   create: Creates the schema, destroying previous data. Good for initial setup or tests.
#   create-drop: Creates the schema, then drops it when the SessionFactory is closed. Good for tests.
#   none: No DDL generation. You manage the schema manually (e.g., with Flyway or Liquibase - recommended for production).
# WARNING: 'create' mode will DROP and RECREATE all tables on every application restart, destroying all data!
# Using 'update' to preserve data while allowing schema updates (recommended for development)
# Set to 'create' only for initial table creation, then change back to 'update'
spring.jpa.hibernate.ddl-auto=update

# MySQL Dialect (Tells Hibernate how to generate MySQL-specific SQL)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Hibernate Lazy Loading and Performance Optimizations
# Disable lazy load no trans to match production (enforce proper transaction boundaries)
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false

# Default batch fetch size to prevent N+1 queries
spring.jpa.properties.hibernate.default_batch_fetch_size=20

# JDBC batch size for bulk operations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.batch_versioned_data=true

# Optional: Naming strategy for tables and columns (if you want to customize how JPA maps entity names to DB names)
# spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ===============================
# CORS CONFIGURATION
# ===============================
app.cors.enabled=true
app.cors.allowed-origins=http://localhost:3000

# ===============================
# EMAIL (GMAIL SMTP) CONFIGURATION
# ===============================
# Gmail SMTP settings
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${GMAIL_USER:your-email@gmail.com}
spring.mail.password=${GMAIL_PASS:your-app-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ===============================
# APPLICATION SETTINGS
# ===============================
app.name=ArchiEase
app.frontend.url=http://localhost:3000

# ===============================
# FILE STORAGE CONFIGURATION
# ===============================
# Directory to store uploaded files (relative to application root or absolute path)
app.storage.upload-dir=uploads
# Base URL for accessing stored files
app.storage.base-url=/api/files
# Maximum file size for uploads (5MB)
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=10MB
# Allowed image types for profile pictures
app.storage.allowed-image-types=image/jpeg,image/png,image/gif,image/webp
# Maximum profile image size (2MB)
app.storage.max-profile-image-size=2097152


# extend local session lifetime to 4 hours
server.servlet.session.timeout=4h